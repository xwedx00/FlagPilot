================================================================================
  FLAGPILOT LIVE INTEGRATION TEST - v7.0 (Qdrant + MinIO)
  Started: 2025-12-28T12:18:00.799293
================================================================================


================================================================================
  TEST SUITE COMPLETED: 2025-12-28T12:18:00.801216
================================================================================
[12:18:00.818] [--] 
[12:18:00.820] [--] ################################################################################
[12:18:00.821] [--] #                          TEST 1: ENVIRONMENT CHECK                           #
[12:18:00.822] [--] ################################################################################
[12:18:00.823] [--] 
[12:18:00.862] [--] OpenRouter Model: kwaipilot/kat-coder-pro:free
[12:18:00.864] [--] OpenRouter Base URL: https://openrouter.ai/api/v1
[12:18:00.865] [--] Qdrant: qdrant:6333
[12:18:00.867] [--] MinIO: minio:9000
[12:18:00.868] [--] ES: es01:9200
[12:18:00.869] [--]   openrouter_api_key: âœ… SET
[12:18:00.871] [--]   openrouter_model: âœ… SET
[12:18:00.872] [--]   openrouter_base_url: âœ… SET
[12:18:00.873] [--]   qdrant_host: âœ… SET
[12:18:00.874] [--]   qdrant_port: âœ… SET
[12:18:00.875] [--]   minio_endpoint: âœ… SET
[12:18:00.877] [--]   es_host: âœ… SET
[12:18:00.878] [--]   es_port: âœ… SET
[12:18:00.880] [OK] LangSmith Project: flagpilot
[12:18:00.882] [OK] Environment check PASSED
[12:18:00.888] [--] 
[12:18:00.890] [--] ################################################################################
[12:18:00.891] [--] #                         TEST 2: QDRANT HEALTH CHECK                          #
[12:18:00.893] [--] ################################################################################
[12:18:00.895] [--] 
[12:18:02.693] [--] Checking Qdrant health...
[12:18:07.527] [..] Qdrant Status:
[12:18:07.529] [..]   {
[12:18:07.532] [..]     "status": "healthy",
[12:18:07.534] [..]     "connected": true,
[12:18:07.535] [..]     "collection": "flagpilot_documents",
[12:18:07.536] [..]     "vectors_count": 0
[12:18:07.537] [..]   }
[12:18:07.538] [OK] Qdrant health check PASSED
[12:18:07.542] [--] 
[12:18:07.543] [--] ################################################################################
[12:18:07.545] [--] #                      TEST 3: LANGCHAIN LLM HEALTH CHECK                      #
[12:18:07.546] [--] ################################################################################
[12:18:07.547] [--] 
[12:18:07.605] [--] Model: kwaipilot/kat-coder-pro:free
[12:18:07.608] [--] Sending test prompt...
[12:18:09.315] [--] Response: Hello! I'm working and ready to help you....
[12:18:09.317] [--] Latency: 1.71s
[12:18:09.319] [OK] LangChain LLM health check PASSED
[12:18:09.324] [--] 
[12:18:09.326] [--] ################################################################################
[12:18:09.328] [--] #                      TEST 4: ELASTICSEARCH HEALTH CHECK                      #
[12:18:09.329] [--] ################################################################################
[12:18:09.330] [--] 
[12:18:09.734] [--] ES Version: 9.2.3
[12:18:09.736] [--] Cluster: flagpilot-cluster
[12:18:09.738] [OK] Elasticsearch health check PASSED
[12:18:09.743] [--] 
[12:18:09.745] [--] ################################################################################
[12:18:09.747] [--] #                          TEST 5: LANGSMITH TRACING                           #
[12:18:09.748] [--] ################################################################################
[12:18:09.750] [--] 
[12:18:09.751] [--] Project: flagpilot
[12:18:09.753] [OK] LangSmith enabled
[12:18:09.754] [OK] LangSmith tracing check PASSED
[12:18:09.759] [--] 
[12:18:09.761] [--] ################################################################################
[12:18:09.764] [--] #                      TEST 6: MINIO STORAGE HEALTH CHECK                      #
[12:18:09.766] [--] ################################################################################
[12:18:09.768] [--] 
[12:18:09.924] [--] Checking MinIO health...
[12:18:09.940] [--] MinIO connected, 0 files in bucket
[12:18:09.943] [OK] MinIO health check PASSED
[12:18:09.950] [--] 
[12:18:09.952] [--] ################################################################################
[12:18:09.954] [--] #                            TEST 7: AGENT REGISTRY                            #
[12:18:09.956] [--] ################################################################################
[12:18:09.958] [--] 
[12:18:10.358] [--] Registered Agents: 10
[12:18:10.359] [OK]   âœ… contract-guardian
[12:18:10.361] [OK]   âœ… job-authenticator
[12:18:10.362] [OK]   âœ… scope-sentinel
[12:18:10.363] [OK]   âœ… payment-enforcer
[12:18:10.365] [OK]   âœ… dispute-mediator
[12:18:10.366] [OK]   âœ… communication-coach
[12:18:10.367] [OK]   âœ… negotiation-assistant
[12:18:10.368] [OK]   âœ… profile-analyzer
[12:18:10.370] [OK]   âœ… ghosting-shield
[12:18:10.371] [OK]   âœ… risk-advisor
[12:18:10.372] [OK] Agent registry check PASSED
[12:18:10.376] [--] 
[12:18:10.377] [--] ################################################################################
[12:18:10.379] [--] #                       TEST 8: FAST-FAIL SCAM DETECTION                       #
[12:18:10.380] [--] ################################################################################
[12:18:10.381] [--] 
[12:18:10.382] [--] Testing message: Congratulations! You've won $50,000! Send $500 to ...
[12:18:13.257] [--] Agents selected: ['risk-advisor']
[12:18:13.259] [--] Urgency: high
[12:18:13.260] [--] Reasoning: This is a classic advance fee scam - user is being asked to pay money to receive a non-existent priz...
[12:18:13.261] [OK] âœ… Scam correctly routed to risk detection
[12:18:13.263] [OK] Fast-fail scam detection PASSED
[12:18:13.268] [--] 
[12:18:13.269] [--] ################################################################################
[12:18:13.271] [--] #                         TEST 9: ORCHESTRATOR ROUTING                         #
[12:18:13.272] [--] ################################################################################
[12:18:13.274] [--] 
[12:18:13.276] [--] 
----- Query: Please review my freelance contract for ... --------------------
[12:18:27.042] [--] Selected: ['contract-guardian']
[12:18:27.044] [--] Reasoning: User needs contract review for red flags, which is...
[12:18:27.046] [OK] âœ… Correct routing
[12:18:27.048] [--] 
----- Query: Is this job posting a scam?... ---------------------------------
[12:18:29.177] [--] Selected: ['job-authenticator', 'risk-advisor']
[12:18:29.179] [--] Reasoning: Job posting verification requires checking for red...
[12:18:29.180] [OK] âœ… Correct routing
[12:18:29.181] [--] 
----- Query: Client keeps adding extra features witho... --------------------
[12:18:31.914] [--] Selected: ['scope-sentinel', 'payment-enforcer', 'negotiation-assistant']
[12:18:31.917] [--] Reasoning: Scope creep detection is needed to identify unauth...
[12:18:31.919] [OK] âœ… Correct routing
[12:18:31.920] [--] 
----- Query: Help me negotiate a better rate... -----------------------------
[12:18:33.940] [--] Selected: ['negotiation-assistant']
[12:18:33.943] [--] Reasoning: User needs help negotiating a better rate, which i...
[12:18:33.944] [OK] âœ… Correct routing
[12:18:33.946] [--] Routing Score: 4/4
[12:18:33.948] [OK] Orchestrator routing validated
[12:18:33.954] [--] 
[12:18:33.956] [--] ################################################################################
[12:18:33.958] [--] #                       TEST 10: QDRANT INGEST & SEARCH                        #
[12:18:33.960] [--] ################################################################################
[12:18:33.962] [--] 
[12:18:34.007] [--] 
----- STEP 1: INGEST TEST DOCUMENT ------------------------------------------
[12:18:42.564] [--] Ingested 1 chunks
[12:18:42.566] [--] 
----- STEP 2: SEARCH TEST ---------------------------------------------------
[12:18:43.192] [--] Found 1 relevant documents
[12:18:43.195] [..]   [1] FREELANCE CONTRACT BEST PRACTICES
        
        This document outlines key terms for freelance co...
[12:18:43.197] [OK] Qdrant ingest & search PASSED
[12:18:43.202] [--] 
[12:18:43.204] [--] ################################################################################
[12:18:43.206] [--] #                        TEST 11: MINIO FILE OPERATIONS                        #
[12:18:43.207] [--] ################################################################################
[12:18:43.208] [--] 
[12:18:43.210] [--] 
----- STEP 1: UPLOAD TEST FILE ----------------------------------------------
[12:18:43.219] [--] Uploaded: test_user_minio/20251228_121843_30eebf74.txt
[12:18:43.221] [--] Size: 51 bytes
[12:18:43.222] [--] 
----- STEP 2: DOWNLOAD TEST -------------------------------------------------
[12:18:43.225] [OK] MinIO file operations PASSED
[12:18:43.230] [--] 
[12:18:43.232] [--] ################################################################################
[12:18:43.233] [--] #                       TEST 12: USER PROFILE OPERATIONS                       #
[12:18:43.235] [--] ################################################################################
[12:18:43.236] [--] 
[12:18:44.324] [--] 
----- CREATE PROFILE --------------------------------------------------------
[12:18:44.665] [--] Created profile for live_test_user_1766924324
[12:18:45.676] [--] 
----- READ PROFILE ----------------------------------------------------------
[12:18:45.699] [--] Retrieved: Test Freelancer with Python, AI/ML, and LangChain ...
[12:18:45.701] [OK] User profile operations PASSED
[12:18:45.706] [--] 
[12:18:45.708] [--] ################################################################################
[12:18:45.710] [--] #                       TEST 13: CHAT HISTORY OPERATIONS                       #
[12:18:45.712] [--] ################################################################################
[12:18:45.713] [--] 
[12:18:45.736] [--] 
----- SAVE MESSAGES ---------------------------------------------------------
[12:18:45.768] [--] Saved 2 messages
[12:18:46.776] [--] 
----- RETRIEVE HISTORY ------------------------------------------------------
[12:18:46.853] [--] Retrieved 2 messages
[12:18:46.855] [OK] Chat history operations PASSED
[12:18:46.861] [--] 
[12:18:46.864] [--] ################################################################################
[12:18:46.865] [--] #                      TEST 14: GLOBAL WISDOM OPERATIONS                       #
[12:18:46.867] [--] ################################################################################
[12:18:46.868] [--] 
[12:18:46.888] [--] 
----- INDEX WISDOM ----------------------------------------------------------
[12:18:46.922] [--] Indexed: Handling Scope Creep
[12:18:48.021] [--] 
----- SEARCH WISDOM ---------------------------------------------------------
[12:18:48.037] [--] Found 1 wisdom entries
[12:18:48.039] [OK] Global wisdom operations PASSED
[12:18:48.043] [--] 
[12:18:48.045] [--] ################################################################################
[12:18:48.046] [--] #                         TEST 15: EXPERIENCE GALLERY                          #
[12:18:48.048] [--] ################################################################################
[12:18:48.049] [--] 
[12:18:48.066] [--] 
----- ADD EXPERIENCE --------------------------------------------------------
[12:18:48.111] [--] Added experience: AI Integration Project
[12:18:49.133] [--] Found 1 similar experiences
[12:18:49.135] [OK] Experience gallery PASSED
[12:18:49.141] [--] 
[12:18:49.142] [--] ################################################################################
[12:18:49.144] [--] #                       TEST 16: SCAM DETECTION SCENARIO                       #
[12:18:49.145] [--] ################################################################################
[12:18:49.147] [--] 
[12:18:49.148] [--] Testing scam job posting...
[12:18:55.707] [--] Response preview: # ðŸš¨ CRITICAL RISK DETECTED

## Risk Advisor

## ðŸš¨ CRITICAL RISK ALERT

### What We Detected
**High-Yield Work-From-Home Scam** - Classic advance-fee fraud pattern

### Why This Is Dangerous
This posti...
[12:18:55.710] [OK] âœ… Scam indicators detected
[12:18:55.711] [OK] Scam detection scenario PASSED
[12:18:55.717] [--] 
[12:18:55.719] [--] ################################################################################
[12:18:55.720] [--] #                      TEST 17: CONTRACT ANALYSIS QUALITY                      #
[12:18:55.722] [--] ################################################################################
[12:18:55.724] [--] 
[12:18:55.725] [--] Testing contract with unfair clauses...
[12:19:51.111] [--] Response preview: # Contract Review: Termination Clause Analysis

## Summary of Findings

This termination clause contains **highly problematic provisions** that heavily favor the client and expose the contractor to significant financial and legal risks. The clause attempts to:

- Allow termination without notice
- F...
[12:19:51.112] [OK] âœ… Contract issues identified
[12:19:51.113] [OK] Contract analysis PASSED
[12:19:51.118] [--] 
[12:19:51.120] [--] ################################################################################
[12:19:51.121] [--] #                        TEST 18: SCOPE CREEP DETECTION                        #
[12:19:51.123] [--] ################################################################################
[12:19:51.124] [--] 
[12:19:51.126] [--] Testing scope creep scenario...
[12:20:22.114] [--] Response preview: # Scope Creep Response Strategy

## ðŸŽ¯ Key Findings Summary

**Critical Issue:** Client is attempting to expand a $500 landing page project into a full enterprise system worth $15,000-30,000 without additional compensation.

**Scope Analysis:**
- **Original:** Basic landing page ($500)
- **New Reques...
[12:20:22.116] [OK] âœ… Scope creep addressed
[12:20:22.118] [OK] Scope creep detection PASSED
[12:20:22.125] [--] 
[12:20:22.126] [--] ################################################################################
[12:20:22.127] [--] #                         TEST 19: GHOSTING PREVENTION                         #
[12:20:22.128] [--] ################################################################################
[12:20:22.130] [--] 
[12:20:22.131] [--] Testing ghosting prevention scenario...
[12:20:54.019] [--] Response preview: # Client Non-Response Recovery Strategy

## Summary

Your client has been unresponsive for **14 days** and owes you the **second milestone payment** while your project is **80% complete**. This situation requires immediate action to protect your payment and project completion.

## Key Findings

- **...
[12:20:54.021] [OK] âœ… Ghosting advice provided
[12:20:54.023] [OK] Ghosting prevention PASSED
[12:20:54.028] [--] 
[12:20:54.030] [--] ################################################################################
[12:20:54.031] [--] #                  TEST 20: CONTRACT NEGOTIATION WITH MEMORY                   #
[12:20:54.032] [--] ################################################################################
[12:20:54.033] [--] 
[12:20:54.034] [--] 
----- NEGOTIATION REQUEST ---------------------------------------------------
[12:21:33.282] [--] Response preview: # Negotiation Response for $50/hr Python/AI Project

## ðŸ“Š Key Findings

- **Rate Gap**: Client's offer is **60% below market rate** ($50 vs $120-$250/hr median: $185/hr)
- **Your Position**: Your $150/hr rate is actually **below market median** for senior Python/AI work
- **Budget Reality**: Client ...
[12:21:33.284] [OK] âœ… Negotiation strategy provided
[12:21:33.286] [OK] Contract negotiation PASSED
[12:21:33.291] [--] 
[12:21:33.293] [--] ################################################################################
[12:21:33.294] [--] #                         TEST 21: END-TO-END WORKFLOW                         #
[12:21:33.296] [--] ################################################################################
[12:21:33.297] [--] 
[12:21:33.298] [--] Running full workflow...
[12:22:56.556] [--] Workflow completed in 83.26s
[12:22:56.558] [--] Response length: 3628 chars
[12:22:56.559] [--] Agents used: []
[12:22:56.560] [OK] End-to-end workflow PASSED
[12:22:56.565] [--] 
[12:22:56.567] [--] ################################################################################
[12:22:56.568] [--] #                     TEST 22: COPILOTKIT API INTEGRATION                      #
[12:22:56.569] [--] ################################################################################
[12:22:56.570] [--] 
[12:22:56.606] [--] API Version: 7.0.0
[12:22:56.608] [--] Architecture: LangGraph + CopilotKit + Qdrant + PostgreSQL
[12:22:56.610] [--] Agents: 14
[12:22:56.611] [--] CopilotKit endpoint: /copilotkit
[12:22:56.612] [OK] CopilotKit integration PASSED
